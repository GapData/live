---
title: "Case study: Human Resources Analytics"
author: "Przemyslaw Biecek"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r,   warning = FALSE, message = FALSE}
library(live)
library(breakDown)
library(randomForest)

HR_data$left <- as.numeric(HR_data$left)
trees <- randomForest(left~., data = HR_data, ntree=1000)
trees

similar <- sample_locally(data = HR_data,
                          explained_instance = HR_data[2,],
                          explained_var = "left", 
                          size = 2000)
head(similar$data)

similar <- add_predictions(nData, similar, black_box_model = trees)
head(similar$data)

trained <- fit_explanation(live_object = similar, 
                            white_box = "regr.lm", 
                            selection = FALSE)
trained

# All predicted values were equal.
#plot_explanation(white_box = trained,
#                explained_instance = HR_data[1,])
```
